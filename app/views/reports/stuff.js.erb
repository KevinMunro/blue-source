$("tr:last").after($("<%= escape_javascript(render partial: 'form_section', locals: {selected_column: nil, selected_operator: nil, text: nil, showing_column: true})%>"));

var disable_text_fields, set_data_field_type;

disable_text_fields = function(row_obj) {
  var _ref;
  if ((_ref = $(row_obj).val().toLowerCase()) === 'all' || _ref === 'nil') {
    $(row_obj).parents("tr").find(".report-input-fields").children(":visible").each(function(index) {
      return $(this).attr("disabled", true);
    });
  } else {
    $(row_obj).parents("tr").find(".report-input-fields").children(":visible").each(function(index) {
      return $(this).attr("disabled", false);
    });
  }
  return $(row_obj).parents("tr").find(".report-input-fields").children(":hidden").each(function(index) {
    return $(this).attr("disabled", true);
  });
};

set_data_field_type = function(row_obj) {
  var report_input_fields, _ref;
  report_input_fields = $(row_obj).parents("tr").find(".report-input-fields");
  report_input_fields.children().each(function(index) {
    return $(this).addClass("hidden");
  });
  if ((_ref = $(row_obj).val().toLowerCase()) === 'projects' || _ref === 'departments') {
    console.log($(row_obj).val().toLowerCase());
    report_input_fields.find("." + ($(row_obj).val().toLowerCase())).removeClass("hidden");
  } else {
    report_input_fields.find(".text").removeClass("hidden");
  }
  return disable_text_fields($(row_obj).parents("tr").find(".operator-dropdown"));
};

$(function() {
  $(".operator-dropdown").each(function(index) {
    disable_text_fields(this);
    return $(this).on("change", function() {
      return disable_text_fields(this);
    });
  });
  $(".glyphicon.glyphicon-remove").on("click", function() {
    return $(this).parents("tr").remove();
  });
  return $(".column-name-dropdown").each(function(index) {
    set_data_field_type(this);
    return $(this).on("change", function() {
      return set_data_field_type(this);
    });
  });
});